# CLAUDE.md

## 目的

Claude Code の作業方針とプロジェクト固有ルールを示す。

## 判断記録のルール

1. 判断内容の要約を記載する
2. 検討した代替案を列挙する
3. 採用しなかった案とその理由を明記する
4. 前提条件・仮定・不確実性を明示する
5. 他エージェントによるレビュー可否を示す

## プロジェクト概要

- 目的: tomacheese.com の公開 Maven リポジトリ
- 主な機能: Maven アーティファクトの静的配信、README の自動生成

## 重要ルール

- 会話と言語は日本語で行う。
- PR とコミットは Conventional Commits に従う。
- 日本語と英数字の間には半角スペースを挿入する。
- コメントは日本語、エラーメッセージは英語で記載する。

## 環境のルール

- ブランチ命名は Conventional Branch (`feat/description`, `fix/description`) に従う。
- GitHub リポジトリ調査時は、テンポラリディレクトリに clone して検索する。
- Renovate が作成した PR に対して追加コミットを行わない。

## コード改修時のルール

- エラーメッセージの絵文字がある場合は、全体で絵文字を統一する。
- TypeScript の `skipLibCheck` 禁止。
- docstring (JSDoc) を日本語で記載する。

## 相談ルール

- Codex CLI: 実装レビュー、局所設計、整合性確認。
- Gemini CLI: 外部仕様、最新情報確認。
- 指摘への対応ルール: 黙殺禁止。

## 開発コマンド

`.github/generate-readme` ディレクトリで実行する。

```bash
# 依存関係のインストール
pnpm install

# README の生成
pnpm start

# ビルド
pnpm build

# Lint/型チェック
pnpm lint

# 修正
pnpm fix
```

## アーキテクチャと主要ファイル

- `com/`, `dev/`, `vexsoftware/`: Maven リポジトリのアーティファクト。
- `.github/generate-readme/`: README 生成ツール (TypeScript)。
- `.github/workflows/`: CI/CD ワークフロー。

## テスト方針

- README 生成ツールのロジック変更時は、実際に生成を行い、差分を確認する。

## 作業チェックリスト

### 新規改修時

1. プロジェクトを理解する
2. 作業ブランチが適切であることを確認する
3. 最新のリモートブランチに基づいた新規ブランチであることを確認する
4. PR がクローズされた不要ブランチが削除済みであることを確認する
5. pnpm で依存関係をインストールする

### コミット・プッシュ前

1. Conventional Commits に従っていることを確認する
2. センシティブな情報が含まれていないことを確認する
3. Lint / Format エラーがないことを確認する
4. 動作確認を行う

### PR 作成前

1. PR 作成の依頼があることを確認する
2. センシティブな情報が含まれていないことを確認する
3. コンフリクトの恐れがないことを確認する

### PR 作成後

1. コンフリクトがないことを確認する
2. PR 本文が最新状態のみを網羅していることを確認する
3. `gh pr checks <PR ID> --watch` で CI を確認する
4. Copilot レビューに対応し、コメントに返信する
5. Codex のコードレビューを実施し、指摘対応を行う
